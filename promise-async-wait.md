

# Խոստումներ (Promises) և Վերադարձներ (Callbacks)

`JavaScript`-ի ասինխրոն ծրագրավորման հիմնական մեթոդները վերադարձներն ու խոստումներն են, որոնք թույլ են տալիս ծրագրերին կատարել ասինխրոն գործողություններ:

### Վերադարձներ (Callbacks)

Վերադարձը ֆունկցիա է, որը փոխանցվում է որպես պարամետր այլ ֆունկցիայի և կանչվում է որոշակի գործողության ավարտից հետո:

Օրինակ՝ վերադարձի օգտագործման

```javascript
function doSomething(callback) {
    setTimeout(() => {
        console.log('Աշխատանք ավարտվեց');
        callback();
    }, 1000);
}

function afterDone() {
    console.log('Կոչվում է վերադարձի ֆունկցիան');
}

doSomething(afterDone);
```

Վերադարձների խնդիրները

- Կոդի բարդություն: Վերադարձների բարդ օգտագործումը կարող է հանգեցնել `"callback hell"` կամ `"պիրամիդալ կոդի"`:

- Անհասկանալիություն: Երկար վերադարձային շղթաները կարող են դժվար ընթեռնելի և հասկանալի լինել:

### Խոստումներ (Promises)

Խոստումը օբյեկտ է, որը ներկայացնում է արժեք, որը կարող է հասանելի լինել հիմա, ապագայում կամ երբեք: Խոստումը ունի երեք հնարավոր վիճակ՝ `pending` (սպասող), `fulfilled` (կատարված) և `rejected` (մերժված):

```javascript
let promise = new Promise((resolve, reject) => {
    setTimeout(() => {
        let success = true; // Փոփոխեք false սխալը սիմուլացնելու համար
        if (success) {
            resolve('Աշխատանք ավարտվեց հաջողությամբ');
        } else {
            reject('Աշխատանքը մերժվեց');
        }
    }, 1000);
});

promise.then(result => {
    console.log(result);
}).catch(error => {
    console.error(error);
});
```

Խոստումների առավելություններ

- Ասինխրոն կոդի պարզեցում: Խոստումները օգնում են ավելի կարդացվող և կառավարվող կոդ գրել:

- Սխալների կառավարում: .catch մեթոդը թույլ է տալիս հեշտորեն կառավարել սխալները:

## Խոստումների շղթայացում

Խոստումները կարելի է շղթայել, ինչը թույլ է տալիս կատարել հաջորդական ասինխրոն գործողություններ:

```javascript
let promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve(1);
  }, 1000);
});
0
promise
  .then((result) => {
    console.log(result); // 1
    return result * 2;
  })
  .then((result) => {
    console.log(result); // 2

    return result * 3;
  })

  .then((result) => {
    console.log(result); // 6
  })

  .catch((error) => {
    console.error(error);
  });

```



### Խոստումներ ընդդեմ Վերադարձների

Խոստումների առավելություններ

- Ավելի կարդացվող և կառավարվող կոդ:

- Ավելի հեշտ սխալների կառավարում:

- Ավելի պարզ ասինխրոն գործողությունների շղթայացում:

Վերադարձների առավելություններ

- Ավելի պարզ և ինտուիտիվ պարզ գործողությունների համար:

- Չկա անհրաժեշտություն նորագույն `ES6+` սինտաքսի օգտագործման համար:

Եզրակացություն

Խոստումները ավելի հզոր և ֆունկցիոնալ գործիք են, հատկապես բարդ ասինխրոն գործողությունների համար: Սակայն, պարզ գործողությունների համար վերադարձները նույնպես կարող են արդյունավետ լինել: Անկախ ընտրված մեթոդից, կարևոր է հասկանալ դրանց աշխատանքային սկզբունքները և ճիշտ կիրառել կոնկրետ իրավիճակներում:

### Async/await

`Async/await` սինտաքսը `JavaScript`-ում թույլ է տալիս գրել ասինխրոն կոդը այնպես, կարծես թե այն սինխրոն է: Այն հիմնված է խոստումների (`Promises`) վրա, բայց ապահովում է ավելի ընթեռնելի և պարզ կոդ, ինչը հեշտացնում է ասինխրոն գործողությունների կառավարումը:

### Async/await-ի հիմնական հատկությունները

- `async function`: Ֆունկցիան նշվում է որպես `async`, ինչը թույլ է տալիս օգտագործել `await` բանալի բառը ֆունկցիայի ներսում:

- `await`: Այս բանալի բառը կարող է օգտագործվել միայն `async` ֆունկցիայի ներսում և սպասում է խոստումը կատարվելու կամ մերժվելու `(resolved/rejected)`:

### Async/await-ի օգտագործման օրինակ

```javascript
// Օրինակ խոստումի ֆունկցիա

function fetchData() {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      let success = true; // Փոփոխեք false սխալը սիմուլացնելու համար

      if (success) {
        resolve("Տվյալները հաջողությամբ բեռնվեցին");
      } else {
        reject("Տվյալները բեռնվելիս սխալ տեղի ունեցավ");
      }
    }, 1000);
  });
}

// Async ֆունկցիա

async function getData() {
  try {
    let result = await fetchData();

    console.log(result);
  } catch (error) {
    console.error(error);
  }
}

getData();

```

### Async/await-ի առավելությունները

- Պարզություն: Կոդը ավելի ընթեռնելի և սինխրոն տեսք ունի:

- Սխալների կառավարում: `try/catch` բլոկները հեշտացնում են սխալների կառավարումը:

- Կարդացվողություն: Խոստումների շղթաները հեշտությամբ փոխարինվում են ավելի կարդացվող կոդով:

### Async/await-ի օգտագործման քայլեր

1. Ստեղծեք`async` ֆունկցիա: Նշեք ֆունկցիան որպես `async`:

2. Օգտագործեք `await` խոստումի համար: Օգտագործեք `await` բանալի բառը խոստումների կատարման համար:

3. Կառավարեք սխալները: Օգտագործեք `try/catch` բլոկներ սխալների կառավարման համար:

### Օրինակ՝ ասինխրոն գործողությունների շղթայացում

```javascript
async function fetchUser() {
  let response = await fetch("https://jsonplaceholder.typicode.com/users/1");

  let data = await response.json();

  return data;
}

async function main() {
  try {
    let user = await fetchUser();

    console.log(user);

    let postsResponse = await fetch(
      `https://jsonplaceholder.typicode.com/users/${user.id}/posts`
    );

    let posts = await postsResponse.json();

    console.log(posts);
  } catch (error) {
    console.error("Error:", error);
  }
}

main();

```

### Async/await-ի կիրառման առավելություններն ու թերությունները

Առավելություններ

- Ավելի պարզ ու կարդացվող կոդ: Ասինխրոն գործողությունները հեշտությամբ նկարագրվում են որպես սինխրոն կոդ:

- Ավելի լավ սխալների կառավարում: `try/catch` բլոկները հեշտացնում են սխալների կառավարումը:

- Ավելի քիչ նեստինգ (`nesting`): Ավելի քիչ նեստինգ և պիրամիդալ կոդ, ինչը կոդը դարձնում է ավելի կարդացվող:

Թերություններ

- Համատեղելիություն: Հնարավոր է՝ հին բրաուզերները չաջակցեն `async/await` սինտաքսին:

- Խոստումների հետ կապված խնդիրներ: await-ը սպասում է խոստումը կատարվելու, ինչը կարող է հանգեցնել կատարողականության խնդիրների, եթե սխալ օգտագործվի:

### Եզրակացություն

`Async/await` սինտաքսը `JavaScript`-ում թույլ է տալիս գրել ավելի պարզ, ընթեռնելի և կառավարվող ասինխրոն կոդ: Այն ապահովում է սինխրոն կոդի տեսք ասինխրոն գործողությունների համար, ինչն էլ հեշտացնում է ծրագրավորողի աշխատանքը:

**
